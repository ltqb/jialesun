<!DOCTYPE HTML>
<html lang="zh_CN" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>面试 - Devops实践笔记</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">导读</a></li><li class="chapter-item expanded affix "><li class="part-title">Linux</li><li class="chapter-item expanded "><a href="../linux/computer.html"><strong aria-hidden="true">1.</strong> 计算</a></li><li class="chapter-item expanded "><a href="../linux/storage.html"><strong aria-hidden="true">2.</strong> 存储</a></li><li class="chapter-item expanded "><a href="../linux/network.html"><strong aria-hidden="true">3.</strong> 网络</a></li><li class="chapter-item expanded "><a href="../linux/security.html"><strong aria-hidden="true">4.</strong> 安全</a></li><li class="chapter-item expanded affix "><li class="part-title">容器知识</li><li class="chapter-item expanded "><a href="../k8s/kubernetes.html"><strong aria-hidden="true">5.</strong> Kubernetes</a></li><li class="chapter-item expanded "><a href="../k8s/docker.html"><strong aria-hidden="true">6.</strong> Docker</a></li><li class="chapter-item expanded affix "><li class="part-title">中间件知识</li><li class="chapter-item expanded affix "><li class="part-title">自动化运维知识</li><li class="chapter-item expanded affix "><li class="part-title">开发基础知识</li><li class="chapter-item expanded affix "><li class="part-title">附录</li><li class="chapter-item expanded "><a href="../appendix/interview.html" class="active"><strong aria-hidden="true">7.</strong> 面试</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Devops实践笔记</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="面试"><a class="header" href="#面试">面试</a></h1>
<h2 id="1-linux基础"><a class="header" href="#1-linux基础">1 Linux基础</a></h2>
<h3 id="11-显示统计磁盘io总共值靠前的"><a class="header" href="#11-显示统计磁盘io总共值靠前的">1.1 显示统计磁盘io总共值靠前的</a></h3>
<pre><code class="language-shell">iotop -apo
</code></pre>
<h3 id="12-缓存cache与缓冲buffer的主要区别"><a class="header" href="#12-缓存cache与缓冲buffer的主要区别">1.2 缓存（cache）与缓冲(buffer)的主要区别</a></h3>
<p>​     Buffer的核心作用是用来缓冲，缓和冲击。比如你每秒要写100次硬盘，对系统冲击很大，浪费了大量时间在忙着处理开始写和结束写这两件事嘛。用个buffer暂存起来，变成每10秒写一次硬盘，对系统的冲击就很小，写入效率高了，日子过得爽了。极大缓和了冲击。</p>
<p>​    Cache的核心作用是加快取用的速度。比如你一个很复杂的计算做完了，下次还要用结果，就把结果放手边一个好拿的地方存着，下次不用再算了。加快了数据取用的速度。</p>
<p><strong>简单来说就是buffer偏重于写，而cache偏重于读。</strong>
ps：有时候大家要好好理解这些专有名词字面上的意思，对理解这些概念有好处，缓冲：<strong>缓解冲击</strong>，缓存：<strong>临时存储</strong></p>
<pre><code class="language-shell">#清理页面缓存
echo 3 &gt;/proc/sys/vm/drop_cache
</code></pre>
<h3 id="13-系统负载"><a class="header" href="#13-系统负载">1.3 系统负载</a></h3>
<p>系统负载为等待被CPU执行的进程以及正在被CPU执行的进程的总数，反应了系统的忙闲情况。</p>
<h3 id="14-为什么有的时候cpu负载高cpu使用率不高"><a class="header" href="#14-为什么有的时候cpu负载高cpu使用率不高">1.4 为什么有的时候cpu负载高，cpu使用率不高</a></h3>
<p>引起负载升高的原因可能是cpu使用率升高的原因，也有可能是IO使用率升高的原因，进程可以分为CPU密集型进程，IO密集型进程，</p>
<p>IO密集型的进程，进程被执行后需要从磁盘上读写数据，读写的速度跟不上cpu的速度，这时候cpu会切换到其他任务，而当前进程处于不可中断的睡眠状态，这种读写特别多的时候，就会存在大量的不可能中断睡眠的进程，从而导致负载增高，cpu低的情况。</p>
<pre><code class="language-powershell">#查看性能指标
top
#查看负载
uptime
</code></pre>
<h3 id="15-进程的状态"><a class="header" href="#15-进程的状态">1.5 进程的状态</a></h3>
<p>中断睡眠状态 S ，不可终端睡眠状态 D , 僵尸进程 Z , 空闲状态 I ，运行状态或者就绪状态 R ，跟踪状态 T</p>
<h3 id="16-僵尸进程"><a class="header" href="#16-僵尸进程">1.6 僵尸进程</a></h3>
<p>一个进程的退出后子进程未退出，导致进程id无法释放，若存在大量的僵尸进程会导致系统因为没有可用的进程号而导致系统不生成新的进程；僵尸进程只能删除他的父进程，让其init进程来管理</p>
<pre><code class="language-powershell">#查看父进程
ps -axjf |grep 名称
#查找僵尸进程
ps -ef|grep defunc
</code></pre>
<h3 id="17-tcp的close_wait与time_wait状态"><a class="header" href="#17-tcp的close_wait与time_wait状态">1.7 TCP的close_wait与time_wait状态</a></h3>
<p>close_wait 服务端会产生的状态，主要原因可能服务程序bug未关闭相关连接</p>
<p>time_wait 客户端产生的状态，time_wait多的主要原因高并发新情况下，time_wait无法及时释放，默认进去time_wait状态的连接会在2MSL后自动释放; 如果程序大量请求使用短连接，可以优化程序使用长连接方式，进而从根本上优化time_wait过多的状态</p>
<h3 id="18-内核优化linux-初始化"><a class="header" href="#18-内核优化linux-初始化">1.8 内核优化，linux 初始化</a></h3>
<p>关闭selinux</p>
<p>vim /etc/selinux/config</p>
<p>修改系统最大文件句柄数，文件打开数</p>
<pre><code class="language-shell">#修改最大文件句柄数
ulimit -n 65535
# 永久更改最大文件打开数
# vim /etc/security/limits.conf
* soft nofile 65536
* hard nofile 65536
</code></pre>
<p>修改tcp默认随机分配端口数,暂时解决time_wait问题</p>
<pre><code class="language-shell">echo '32768 61000' &gt; /proc/sys/net/ipv4/ip_local_port_range
</code></pre>
<h3 id="19-为什么tcpudp端口最大是65535"><a class="header" href="#19-为什么tcpudp端口最大是65535">1.9 为什么TCP,UDP端口最大是65535</a></h3>
<p>在TCP、UDP协议的开头，会分别有16位来存储源端口号和目标端口号，所以端口个数是2^16-1=65535个。</p>
<h3 id="110-tcp三次握手四次挥手"><a class="header" href="#110-tcp三次握手四次挥手">1.10 TCP三次握手，四次挥手</a></h3>
<p>第一次握手 客户端发送SYN给服务端   ( SYN=1,seq=x)</p>
<p>第二次握手 服务端发送SYN，ACK给客户端  (SYN=1,ACK=1,seq=y,ack=x+1)</p>
<p>第三次握手 客户端发送ACK给服务端 ，建立连接(ACK=1,ack=y+1,seq=x+1)   <strong>ESTABLISHED状态</strong></p>
<p><img src="C:%5CUsers%5CEthan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210716171531025.png" alt="image-20210716171531025" /></p>
<p>四次挥手</p>
<p><img src="C:%5CUsers%5CEthan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210716171924683.png" alt="image-20210716171924683" /></p>
<h3 id="111-iptables介绍"><a class="header" href="#111-iptables介绍">1.11 iptables介绍</a></h3>
<p><strong>netfilter才是防火墙真正的安全框架（framework），netfilter位于内核空间。</strong></p>
<p><strong>iptables其实是一个命令行工具，位于用户空间，我们用这个工具操作真正的框架</strong></p>
<p>netfilter/iptables组成Linux平台下的包过滤防火墙，与大多数的Linux软件一样，这个包过滤防火墙是免费的，它可以代替昂贵的商业防火墙解决方案，完成封包过滤、封包重定向和网络地址转换（NAT）等功能。</p>
<p>Netfilter是Linux操作系统核心层内部的一个数据包处理模块，它具有如下功能：</p>
<p>网络地址转换(Network Address Translate)</p>
<p>数据包内容修改</p>
<p>以及数据包过滤的防火墙功能</p>
<p>四表五链</p>
<p>链是关卡，表是规则的集合</p>
<p>nat ,filter,mangle,row 表</p>
<p>prerouting,input,forward,output,postrouting链</p>
<p><img src="C:%5CUsers%5CEthan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210714120656066.png" alt="image-20210714120656066" /></p>
<h3 id="112-sed-替换第二第三行的hello-换为wolrd"><a class="header" href="#112-sed-替换第二第三行的hello-换为wolrd">1.12 sed 替换第二，第三行的hello 换为wolrd</a></h3>
<pre><code class="language-shell">sed -i '2,3s/hello/world/g' text.txt
</code></pre>
<h3 id="113-软链接与硬链接的区别"><a class="header" href="#113-软链接与硬链接的区别">1.13 软链接与硬链接的区别</a></h3>
<p>硬链接是存在同一个文件系统中，而软链接却可以跨越不同的文件系统。</p>
<p>软链接：
1.软链接，以路径的形式存在。类似于Windows操作系统中的快捷方式
2.软链接可以 跨文件系统 ，硬链接不可以
3.软链接可以对一个不存在的文件名进行链接
4.软链接可以对目录进行链接</p>
<p>硬链接:
1.硬链接，以文件副本的形式存在。但不占用实际空间。
2.不允许给目录创建硬链接
3.硬链接只有在同一个文件系统中才能创建</p>
<h3 id="114-linux命令结果stdout-与stderr-输出"><a class="header" href="#114-linux命令结果stdout-与stderr-输出">1.14 linux命令结果stdout 与stderr 输出</a></h3>
<pre><code class="language-shell"># 错误输出与标准输出
command &gt;1.txt 2&gt;&amp;1
# 错误输出到文本
ll -error 2&gt;error.txt
</code></pre>
<h2 id="2-容器技术"><a class="header" href="#2-容器技术">2 容器技术</a></h2>
<h3 id="21-kubernetes"><a class="header" href="#21-kubernetes">2.1 kubernetes</a></h3>
<h4 id="211-flannel-的三种模式"><a class="header" href="#211-flannel-的三种模式">2.1.1 flannel 的三种模式</a></h4>
<pre><code class="language-tex">udp; vxlan; hostgw
</code></pre>
<p>**udp：**主要基于覆盖网络，数据包在用户态解包封包，损耗较高，性能低</p>
<p>**vxlan：**也是覆盖网络，数据包在内核态封包解包，较UDP，性能提高</p>
<pre><code>PodA --&gt; A_cni0 --&gt;A_fannel1--&gt;A_eth0--&gt;B_eth0--&gt;B_falnnel1--&gt;B_cni0--&gt;PodB 
</code></pre>
<p>etcd 记录flannel中各个节点的subnet和flannel虚拟网卡对应的宿主机IP与mac地址</p>
<p>flanneld进行收集子网信息与虚拟网卡对应的主机IP与mac信息</p>
<p>**hostgw：**依赖底层网络，通过路由实现，性能最好</p>
<h4 id="dns-无法解析"><a class="header" href="#dns-无法解析">DNS 无法解析</a></h4>
<p>可能程序依赖 集群 DNS 服务，比如启动时连接数据库，数据库使用 service 名称或外部域名都需要 DNS 解析，如果解析失败程序将报错并主动退出。解析失败的可能原因:</p>
<ul>
<li>集群网络有问题，Pod 连不上集群 DNS 服务 telnet dns :53</li>
<li>集群 DNS 服务挂了，无法响应解析请求</li>
<li>Service 或域名地址配置有误，本身是无法解析的地址</li>
</ul>
<h4 id="212-flanel与calico的区别"><a class="header" href="#212-flanel与calico的区别">2.1.2 flanel与calico的区别</a></h4>
<p>flannel不支持 NetworkPolicy,网络策略，calico支持</p>
<h4 id="213-k8s-operater"><a class="header" href="#213-k8s-operater">2.1.3 k8s operater</a></h4>
<h4 id="214-k8s-configmap热变更原理"><a class="header" href="#214-k8s-configmap热变更原理">2.1.4 k8s configmap热变更原理</a></h4>
<p>​      只有通过目录挂载的configmap才具备热更新能力，configmap资源会存在etcd里面,Kubelet是管理pod生命周期的主要组件，同时它也会维护pod所需的资源，其中之一就是configmap，实现定义在<code>pkg/kubelet/configmap/</code>中，kubelet主要是通过configmap_manager 来管理每个pod所使用的configmap</p>
<p>​     只有当Pod使用目录形式挂载configmap时才会得到热更新能力，其余两种使用configmap的方式是Pod环境变量注入和subPath形式。因为kubelet是定时（以一定的时间间隔）同步Pod和缓存中的configmap内容的，且三种Manager更新缓存中的configmap内容可能会有延迟，所以，当我们更改了configmap的内容后，真正反映到Pod中可能要经过syncFrequency + delay这么长的时间。</p>
<h4 id="215-pod调度亲和与反亲和"><a class="header" href="#215-pod调度亲和与反亲和">2.1.5 pod调度亲和与反亲和</a></h4>
<p>常用使用nodeSelector,使用标签将pod调度到含有标签的节点；</p>
<p>或者直接指定nodeName进行pod的调用</p>
<p>node 亲和与反亲和</p>
<p>pod 亲和与反亲和</p>
<p>策略有软策略，应策略</p>
<p>污点与容忍的配置</p>
<h5 id="2151-kubernetes-支持两种方式将-pod-打散调度"><a class="header" href="#2151-kubernetes-支持两种方式将-pod-打散调度">2.1.5.1 Kubernetes 支持两种方式将 Pod 打散调度</a></h5>
<p>Pod 反亲和 (Pod Anti-Affinity)</p>
<p>Pod 拓扑分布约束 (Pod Topology Spread Constraints)</p>
<h4 id="216-k8s-高可用原理"><a class="header" href="#216-k8s-高可用原理">2.1.6 k8s 高可用原理</a></h4>
<p>scheduler与control-manager静态pod配置文件设置lead-elect=true,scheduler与controller-manager 使用一主多从的功能.</p>
<p><strong>Kubernetes中实现了一套简单的选主逻辑，依赖Etcd实现scheduler和controller-manager的选主功能。</strong></p>
<p>如果scheduler和controller-manager在启动的时候设置了leader-elect参数，它们在启动后会先尝试获取leader节点身份，只有在获取leader节点身份后才可以执行具体的业务逻辑。</p>
<p>它们分别会在Etcd中创建kube-scheduler和kube-controller-manager的endpoint，endpoint的信息中记录了当前的leader节点信息，以及记录的上次更新时间。</p>
<p>leader节点会定期更新endpoint的信息，维护自己的leader身份。</p>
<p>每个从节点的服务都会定期检查endpoint的信息，如果endpoint的信息在时间范围内没有更新，它们会尝试更新自己为leader节点。scheduler服务以及controller-manager服务之间不会进行通信，利用Etcd的强一致性，能够保证在分布式高并发情况下leader节点的全局唯一性</p>
<h4 id="217-delployment-replicaset-rc-区别"><a class="header" href="#217-delployment-replicaset-rc-区别">2.1.7 delployment ,replicaSet, rc 区别</a></h4>
<p>deployment控制创建rs,支持滚动更新，回滚操作</p>
<p>rs控制pod的副本数，实际创建pod，实现pod副本数预期</p>
<p><strong>spec.strategy.type.rollingUpdate.maxSurge</strong></p>
<p>指定在升级时，最大可以创建多少个pod</p>
<p><strong>spec.strategy.type.rollingUpdate.maxUnavailable</strong></p>
<p>指定在升级时，最大不可用的pods的值</p>
<h4 id="218-k8s集群日志设计方案"><a class="header" href="#218-k8s集群日志设计方案">2.1.8 k8s集群日志设计方案</a></h4>
<p><img src="C:%5CUsers%5CEthan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210801153654015.png" alt="image-20210801153654015" /></p>
<h4 id="219-k8s-qos服务质量"><a class="header" href="#219-k8s-qos服务质量">2.1.9 k8s QOS服务质量</a></h4>
<p>级别有：Guaranteed(确保),burstable(突发),BestEffort(尽力)</p>
<p>资源不足时优先级：Guaranteed&gt;burstable&gt;BestEffort</p>
<h3 id="22-docker"><a class="header" href="#22-docker">2.2 docker</a></h3>
<h4 id="221-docker镜像原理"><a class="header" href="#221-docker镜像原理">2.2.1 docker镜像原理</a></h4>
<p>根文件系统，docker在镜像设计的时候引入了层的的概念（layer）(Union File System)</p>
<p>docker commit 只对可读写层进行提交修改保存</p>
<p>init层 存hostname /etc/host.conf ,/etc/resolv.conf 等信息，这一层不被修改</p>
<p><img src="C:%5CUsers%5CEthan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210801161940674.png" alt="image-20210801161940674" /></p>
<h4 id="222-dockerfile-entrypoint-与cmd的区别"><a class="header" href="#222-dockerfile-entrypoint-与cmd的区别">2.2.2 Dockerfile entrypoint 与cmd的区别</a></h4>
<p>当docker run启动一个容器的时候，如果镜像为entrypoint打包，后面加参数的是无效的，无法覆盖默认命令</p>
<p>当docker run启动一个容器的时候，如果镜像为cmd打包，可以覆盖默认命令</p>
<p>当docker run启动一个容器的时候，如果镜像有entrypoint和cmd打包，entrypoint为固定命令，cmd可以作为参数</p>
<pre><code class="language-dockerfile">FROM nginx

ENTRYPOINT [&quot;nginx&quot;, &quot;-c&quot;] # 定参

CMD [&quot;/etc/nginx/nginx.conf&quot;] # 变参 
</code></pre>
<h4 id="223-namespace-与cgroup-rootfs分别指什么"><a class="header" href="#223-namespace-与cgroup-rootfs分别指什么">2.2.3 namespace 与cgroup ,rootfs分别指什么</a></h4>
<p>隔离，限制，根文件系统</p>
<h2 id="3-中间件以及自动化运维"><a class="header" href="#3-中间件以及自动化运维">3 中间件以及自动化运维</a></h2>
<h3 id="31-ansible"><a class="header" href="#31-ansible">3.1 ansible</a></h3>
<h4 id="311-ansible常用模块"><a class="header" href="#311-ansible常用模块">3.1.1 ansible常用模块</a></h4>
<pre><code class="language-shell">setup ,ping ,line ,shell,get_url,shell,command
</code></pre>
<h3 id="32--kafka"><a class="header" href="#32--kafka">3.2  kafka</a></h3>
<p>关键词： 消费者，生成者，broken, 消费组，偏移量 ,</p>
<p>(1) Producer : 消息生产者，就是向kafka broker发消息的客户端；
(2) Consumer : 消息消费者，向kafka broker取消息的客户端;
(3) Topic : 可以理解为一个队列, 消息的分类。
(4) Broker : 一台kafka服务器就是一个broker。一个集群由多个broker组成。一个broker可以容纳多个topic；
(5) Partition : 为了实现扩展性，一个非常大的topic可以分布到多个broker（即服务器）上，一个topic可以分为多个partition，每个partition是一个有序的队列。partition中的每条消息都会被分配一个有序的id（offset）。kafka只保证按一个partition中的顺序将消息发给consumer，不保证一个topic的整体（多个partition间）的顺序；
(6) Offset：kafka的存储文件都是按照offset.kafka来命名，用offset做名字的好处是方便查找。例如你想找位于2049的位置，只要找到2048.kafka的文件即可。当然the first offset就是00000000000.kafka。
(7) Consumer Group （CG）：这是kafka用来实现一个topic消息的广播（发给所有的consumer）和单播（发给任意一个consumer）的手段。一个topic可以有多个CG。topic的消息会复制（不是真的复制，是概念上的）到所有的CG，但每个partion只会把消息发给该CG中的一个consumer。如果需要实现广播，只要每个consumer有一个独立的CG就可以了。要实现单播只要所有的consumer在同一个CG。用CG还可以将consumer进行自由的分组而不需要多次发送消息到不同的topic</p>
<p>重复消费问题</p>
<h3 id="33--redis"><a class="header" href="#33--redis">3.3  redis</a></h3>
<p>redis 如何实现持久化？</p>
<p>rdb  redis data base</p>
<p>aof append only file</p>
<h3 id="34--大数据相关"><a class="header" href="#34--大数据相关">3.4  大数据相关</a></h3>
<p>hue,ambria</p>
<p>hive,clickhouse,spark</p>
<h3 id="35--nginx"><a class="header" href="#35--nginx">3.5  nginx</a></h3>
<h4 id="351-location下面的root-跟alias的区别"><a class="header" href="#351-location下面的root-跟alias的区别">3.5.1 location下面的root 跟alias的区别</a></h4>
<p>root指令会将location块的”url路径”带入到”root指令路径”中，将带入后的路径作为”最终路径”，使用”最终路径”与url建立对应关系。</p>
<p><strong>列如url 为/demo/123.jpg ,root为/opt/html,则访问的是/opt/html/demo/123.jpg</strong></p>
<p>alias指令则直接将location块的”url路径”与”alias指令路径”建立对应关系,也就是说，当我们使用alias时，location的url是与alias的路径完全对等的</p>
<p><strong>列如url 为/demo/123.jpg ,alias为/opt/html,则访问的是/opt/html/123.jpg</strong></p>
<h4 id="352-nginx优化"><a class="header" href="#352-nginx优化">3.5.2 nginx优化</a></h4>
<pre><code class="language-nginx"># cpu亲和
work_procese 2;
worker_cpu_affinity 01 10;

#nginx work 进程
worker_rlimit_nofile 65535;




</code></pre>
<h3 id="36-mysql"><a class="header" href="#36-mysql">3.6 mysql</a></h3>
<h2 id="4-devops"><a class="header" href="#4-devops">4 Devops</a></h2>
<h3 id="41-shell基础"><a class="header" href="#41-shell基础">4.1 Shell基础</a></h3>
<h4 id="411-shell中的符号大全"><a class="header" href="#411-shell中的符号大全">4.1.1 shell中的$符号大全</a></h4>
<pre><code class="language-shell">$$ 获取当前进程号
$# 获取传递到脚本或者函数的参数个数
$! 后台运行的最后一个进程ID号
$? 显示命令退出状态，为0表示正常
$1 脚本或函数的第一个参数
$* 字符串方式显示传入脚本参数
</code></pre>
<h3 id="42-python基础"><a class="header" href="#42-python基础">4.2 python基础</a></h3>
<h4 id="421-list-与元组的区别"><a class="header" href="#421-list-与元组的区别">4.2.1 list 与元组的区别</a></h4>
<p>list 可以改变</p>
<p>tuple无法改变，一经初始化就无法改变</p>
<h3 id="43-go基础"><a class="header" href="#43-go基础">4.3 go基础</a></h3>
<h3 id="44-前端技术vue"><a class="header" href="#44-前端技术vue">4.4 前端技术VUE</a></h3>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../k8s/docker.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../k8s/docker.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
